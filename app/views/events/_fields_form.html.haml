= f.simple_fields_for :fields, Field.new, child_index: '{{$index}}' do |form|
  %h3{'ng-show' => 'field.group_name'}
    {{ field.group_name }}
  = form.input :group_name, input_html: { 'ng-model' => 'field.group_name' },
      wrapper_html: { 'ng-show' => 'field.editing' }
  = form.input :id, as: :hidden, input_html: { 'value' => '{{field.id}}' }
  = form.input :_destroy, as: :hidden, input_html: { 'value' => '{{field._destroy}}' }
  = form.input :name, input_html: { 'ng-model' => 'field.name', class: :'input-xxlarge' },
      placeholder: t(:'simple_form.placeholders.field.name')
  = form.input :field_type, as: :select, collection: Field::VALID_TYPES,
      include_blank: false, input_html: { 'ng-model' => 'field.field_type',
      disabled: !form.object.new_record? },
      wrapper_html: { 'ng-show' => 'field.editing' }
  = form.input :extra, wrapper_html: { 'ng-show' => 'field.editing && showExtra(field)' },
      input_html: { 'ng-model' => 'field.extra' },
      placeholder: t(:'simple_form.placeholders.field.extra')
  = form.input :required, input_html: { 'ng-model' => 'field.required' },
      wrapper_html: { 'ng-show' => 'field.editing' }
  = form.input :show_receipt, input_html: { 'ng-model' => 'field.show_receipt' },
      wrapper_html: { 'ng-show' => 'field.editing' }
  = form.input :priority, as: :hidden, input_html: { value: '{{field.priority}}' }

= link_to icon_tag('icon-pencil icon-white'), 'javascript:void(0)', 'ng-click' => 'editField(field)',
    'ng-show' => '! field.editing', class: 'btn btn-warning btn-mini', title: t(:edit_field)
= link_to icon_tag('icon-ok icon-white'), 'javascript:void(0)', 'ng-click' => 'field.editing = false',
    'ng-show' => 'field.editing', class: 'btn btn-success btn-mini'
= link_to icon_tag('icon-trash icon-white'), 'javascript:void(0)', 'ng-click' => 'removeField($index)',
    class: 'btn btn-danger btn-mini', title: t(:remove_field)
= link_to icon_tag('icon-arrow-up'), 'javascript:void(0)',
    class: 'btn btn-mini', :'ng-show' => 'fieldsLength() > 1 && $index > 0',
    :'ng-click' => 'fieldUp($index)', title: t(:move)
= link_to icon_tag('icon-arrow-down'), 'javascript:void(0)',
    class: 'btn btn-mini', :'ng-show' => 'fieldsLength() > 1 && $index < fieldsLength() - 1',
    :'ng-click' => 'fieldDown($index)', title: t(:move)
